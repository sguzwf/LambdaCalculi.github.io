<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>My Hakyll Blog - CMake Tips</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">My Hakyll Blog</a>
            </div>
            <div id="navigation">
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <h1>CMake Tips</h1>

            <div class="info">
    Posted on April 27, 2014
    
</div>

<h1 id="intorduciton">Intorduciton</h1>
<p><a href="http://www.cmake.org/"><strong>CMake</strong></a> is a collection of building, testing and packaging tools. Admittedly autoconf/automake is the de facto tools for opensource project in a long period of time, there are many reasons for chosing CMake: it is powerfull and easy to use, supports various IDE, and cross platform.</p>
<p>In this article I write down various snippets during my daily usage of CMake/CTest/CPack. In addtion, I assumed that the readers are already familiar with CMake, otherwise <a href="http://www.kitware.com/products/books/CMakeBook.htmll">Mastering CMake</a> and the <a href="http://www.cmake.org/cmake/help/documentation.html">official online doc</a> are the best material for reference.</p>
<h1 id="tips">Tips</h1>
<ol style="list-style-type: decimal">
<li><p><strong>Generate both static and shared library file</strong><br /> add_library(foo SHARED <span class="math"><em>S</em><em>R</em><em>C</em><sub><em>L</em></sub><em>I</em><em>S</em><em>T</em>)<em>a</em><em>d</em><em>d</em><sub><em>l</em></sub><em>i</em><em>b</em><em>r</em><em>a</em><em>r</em><em>y</em>(<em>f</em><em>o</em><em>o</em><sub><em>s</em></sub><em>t</em><em>a</em><em>t</em><em>i</em><em>c</em><em>S</em><em>T</em><em>A</em><em>T</em><em>I</em><em>C</em></span>{SRC_LIST}) set_target_properties(foo_static PROPERTIES OUTPUT_NAME “foo”)</p></li>
<li><p><strong>Use different compiler</strong><br /> The CMAKE_C_COMPILER and CMAKE_CXX_COMPILER are used for these purpose, but those variable must be set before project() command. The recommended way is using “cmake -D”, i.e.: cmake -D CMAKE_CXX_COMPILER=/path/to/your/compiler</p></li>
<li><strong>Retrieve the absolute path</strong><br />There’re three frequently-used variables:
<ul>
<li>CMAKE_SOURCE_DIR The full path to the top level of source tree</li>
<li>CMAKE_CURRENT_SOURCE_DIR The full path to the source directory currently being processed</li>
<li>CMAKE_CURRENT_BINARY_DIR The full path to the build directory that is currently being processed</li>
</ul></li>
<li><strong>Pass value to parent directory.</strong><br />Certainly it is not a good practice to pass value to parent directory, sometimes it’s reasonable to do so. Here are three methods:
<ul>
<li>use PARENT_SCOPE with set(the simplest method) in subdir: set(VAR_IN_SUB “put something here” PARENT_SCOPE)</li>
<li>set variable in sub directory, and then get its definition in subdir: set(VAR_IN_SUB “put something here”) in current dir: get_directory_property(VAR DIRECTORY subdir DEFINITION VAR_IN_SUB)</li>
<li>set directory property in sub directory, and then get its value in subdir: set_directory_properties(PROPERTIES PRO_IN_SUB “put something here” in current dir: get_directory_property(VAR DIRECTORY subdir PRO_IN_SUB)</li>
</ul></li>
<li><p><strong>Generate version, build time/host etc. info.</strong></p></li>
</ol>
<h1 id="final-words">Final words</h1>
<p>Note that this article will be updated from time to time, please feel free to contact me if you have any comment, suggestion and criticism.</p>

        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
